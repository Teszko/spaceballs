<html>
    <head>
        <title>Spaceballs</title>
        <style>
            body { margin: 0; }
            canvas { width: 100%; height: 100% }
        </style>
    </head>
    <body>
        <script src="js/apt.js"></script>
        <script src="js/cannon.min.js"></script>
        <script src="js/three.min.js"></script>
        <script src="js/orbitControls.js"></script>
        <script src="js/World.js"></script>
        <script src="js/Objects.js"></script>
        <script src="js/utils.js"></script>
        <script>
            var basicMaterial;
            var world = new World();
            world.init(document.body);

            basicMaterial = new THREE.MeshLambertMaterial({color: 0xffff00});

            var radius = 30;
            var beta = 0;

            var pkg = JSON.parse(dep_json);

            for (var i=0; i<pkg.pkg.nodes.length; i++) {
                var alpha = 360 / pkg.pkg.nodes.length * i;
                var offset = (Math.random() * radius);
                var a = Math.sin(alpha) * offset;
                var b = Math.cos(alpha) * offset;
                beta += 5 * Math.random();
                beta %= 360;
                var pX = Math.sin(beta) * a;
                var pY = Math.sin(beta) * b;
                var pZ = Math.cos(beta) * offset;
                var sphere = new Sphere(world, basicMaterial, CANNON.Body.DYNAMIC, pkg.pkg.nodes[i].id, pkg.pkg.nodes[i].name, pX, pY, pZ);
            }

            for (var z=0; z<pkg.pkg.links.length; z++) {
                var c_b = new Connection(world, pkg.pkg.links[z][0], pkg.pkg.links[z][1], 1.7);
            }

            world.clock.getDelta();
            function render() {
                requestAnimationFrame(render);
                updatePhysics(world);
                world.renderer.render(world.scene, world.camera);
            }
            render();
        </script>
    </body>
</html>