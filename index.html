<html>
    <head>
        <title>Spaceballs</title>
        <style>
            body { margin: 0; }
            canvas { width: 100%; height: 100% }
        </style>
    </head>
    <body>
        <script src="js/cannon.min.js"></script>
        <script src="js/three.min.js"></script>
        <script src="js/orbitControls.js"></script>
        <script src="js/World.js"></script>
        <script src="js/Objects.js"></script>
        <script src="js/utils.js"></script>
        <script>
            var basicMaterial;
            var world = new World();
            world.init(document.body);

            basicMaterial = new THREE.MeshLambertMaterial({color: 0xffff00});

            var particleCount = 300;
            var radius = 30;
            var lastSphere = null;
            var beta = 0;

            for (var i=0; i<particleCount; i++) {
                var alpha = 360 / particleCount * i;
                var offset = (Math.random() * radius);
                var a = Math.sin(alpha) * offset;
                var b = Math.cos(alpha) * offset;
                beta += 5 * Math.random();
                beta %= 360;
                var pX = Math.sin(beta) * a;
                var pY = Math.sin(beta) * b;
                var pZ = Math.cos(beta) * offset;

                var currentSphere = new Sphere(world, basicMaterial, pX, pY, pZ);
                if (lastSphere) {
                    var c_a = new Connection(world, currentSphere, lastSphere, 0.7);
                }

                lastSphere = currentSphere;
            }

            var numRandomConnections = 600;
            for (var z=0; z<numRandomConnections; z++) {
                var rand1 = Math.round(Math.random() * (world.sphereList.length-1));
                var rand2 = Math.round(Math.random() * (world.sphereList.length-1));
                if (Math.abs(rand2-rand1) == 1) {
                    z--;
                    continue;
                }
                var c_b = new Connection(world, world.sphereList[rand1], world.sphereList[rand2], 1.5);
            }

            world.clock.getDelta();
            function render() {
                requestAnimationFrame(render);
                updatePhysics(world);
                world.renderer.render(world.scene, world.camera);
            }
            render();
        </script>
    </body>
</html>