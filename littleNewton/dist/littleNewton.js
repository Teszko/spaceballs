var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[c]=d.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,c,d,e){if(c){d=$jscomp.global;b=b.split(".");for(e=0;e<b.length-1;e++){var f=b[e];f in d||(d[f]={});d=d[f]}b=b[b.length-1];e=d[b];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(d,b,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Math.sign",function(b){return b?b:function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1}},"es6-impl","es3");var NEWTON={REVISION:"1",__IDCont:0};NEWTON.prototype={constructor:NEWTON};
NEWTON.isNumber=function(b){return!isNaN(b-0)&&null!=b};NEWTON.isVector=function(b){return void 0!==b};NEWTON.v3d=function(b,c,d){this.type="v3d";this.x=NEWTON.isNumber(b)?b:0;this.y=NEWTON.isNumber(c)?c:0;this.z=NEWTON.isNumber(d)?d:0};NEWTON.v3d.prototype={constructor:NEWTON.v3d};NEWTON.v3d.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};NEWTON.v3d.prototype.lengthsquare=function(){return this.x*this.x+this.y*this.y+this.z*this.z};
NEWTON.v3d.prototype.set=function(b,c,d){this.x=NEWTON.isNumber(a)?b:this.x;this.y=NEWTON.isNumber(a)?c:this.y;this.z=NEWTON.isNumber(a)?d:this.z;return this};NEWTON.v3d.prototype.copy=function(b){NEWTON.isVector(b)&&(this.x=b.x,this.y=b.y,this.z=b.z);return this};NEWTON.v3d.prototype.multiply=function(b){NEWTON.isNumber(b)&&(this.x*=b,this.y*=b,this.z*=b);return this};
NEWTON.v3d.prototype.add=function(b,c){NEWTON.isVector(b)&&(NEWTON.isVector(c)?this.__addVectors(b,c):this.__addVectors(this,b));return this};NEWTON.v3d.prototype.__addVectors=function(b,c){this.x=b.x+c.x;this.y=b.y+c.y;this.z=b.z+c.z;return this};NEWTON.v3d.prototype.subtract=function(b,c){NEWTON.isVector(b)&&(NEWTON.isVector(c)?this.__subtractVectors(b,c):this.__subtractVectors(this,b));return this};
NEWTON.v3d.prototype.__subtractVectors=function(b,c){this.x=b.x-c.x;this.y=b.y-c.y;this.z=b.z-c.z;return this};NEWTON.World=function(){this.__bodies=[];this.__force_modifiers=[]};NEWTON.World.prototype={constructor:NEWTON.World};NEWTON.World.prototype.add=function(b){if(void 0===b.type)return b;if("Body"==b.type)return this.__bodies.push(b),b;"Rubberband"!=b.type&&"Repellant"!=b.type&&"Gravity"!=b.type||this.__force_modifiers.push(b);return b};
NEWTON.World.prototype.step=function(b){for(var c=0;c<this.__bodies.length;c++)this.__bodies[c].__updatePosition(b),this.__bodies[c].__resetForce(),this.__bodies[c].__damping();for(c=0;c<this.__force_modifiers.length;c++)this.__force_modifiers[c].__applyForce(this);for(c=0;c<this.__bodies.length;c++)this.__bodies[c].__updateAcceleration(),this.__bodies[c].__updateVelocity(b)};NEWTON.Object3D=function(){Object.defineProperty(this,"id",{value:NEWTON.__IDCont++});this.type="Object3D";this.position=new NEWTON.v3d};
NEWTON.Object3D.prototype={constructor:NEWTON.Object3D};NEWTON.Body=function(){NEWTON.Object3D.call(this);this.type="Body";this.mass=1;this.damping=.5;this.__inverseMass=1/this.mass;this.velocity=new NEWTON.v3d;this.acceleration=new NEWTON.v3d;this.lastacceleration=new NEWTON.v3d;this.force=new NEWTON.v3d};NEWTON.Body.prototype=Object.create(NEWTON.Object3D.prototype);NEWTON.Body.prototype.constructor=NEWTON.Body;NEWTON.Body.prototype.applyForceVector=function(b){NEWTON.isVector(b)&&this.force.add(b);return this};
NEWTON.Body.prototype.__updateAcceleration=function(){this.lastacceleration.copy(this.acceleration);this.acceleration.copy(this.force);this.acceleration.multiply(this.__inverseMass);30<this.acceleration.x&&console.log("accel: "+this.acceleration.x+" "+this.acceleration.x+" "+this.acceleration.x+" ")};
NEWTON.Body.prototype.__updateVelocity=function(b){var c=new NEWTON.v3d;c.copy(this.acceleration);c.add(this.lastacceleration);c.multiply(.5*b);this.velocity.add(c);50>Math.abs(this.velocity.x)+Math.abs(this.velocity.y)+Math.abs(this.velocity.z)||console.log(this.id,this.velocity);this.velocity=this.__limitV(this.velocity)};NEWTON.Body.prototype.__velocityToPosition=function(b){var c=new NEWTON.v3d;c.copy(this.velocity);c.multiply(b);this.position.add(c)};
NEWTON.Body.prototype.__limitV=function(b){b.x=isNaN(b.x)?10:b.x;b.x=isNaN(b.x)?10:b.x;b.x=isNaN(b.x)?10:b.x;b.x=10>Math.abs(b.x)?b.x:10*Math.sign(b.x);b.y=10>Math.abs(b.y)?b.y:10*Math.sign(b.y);b.z=10>Math.abs(b.z)?b.z:10*Math.sign(b.z);return b};NEWTON.Body.prototype.__updatePosition=function(b){var c=new NEWTON.v3d;c.copy(this.velocity);c.multiply(b);var d=new NEWTON.v3d;d.copy(this.acceleration);d.multiply(b);d=this.__limitV(d);d.multiply(.5*b);this.position.add(c);this.position.add(d)};
NEWTON.Body.prototype.__resetForce=function(){this.force.x=0;this.force.y=0;this.force.z=0};NEWTON.Body.prototype.__damping=function(){var b=this.velocity.length(),c=new NEWTON.v3d;c.copy(this.velocity).multiply(b).multiply(this.damping).multiply(-1);this.applyForceVector(c)};NEWTON.Rubberband=function(b,c){this.type="Rubberband";this.body1=b;this.body2=c};NEWTON.Rubberband.prototype={constructor:NEWTON.Rubberband};NEWTON.Rubberband.prototype.__applyForce=function(){var b=new NEWTON.v3d;b.subtract(this.body2.position,this.body1.position);b.multiply(this.force(b.length())/b.lengthsquare());this.body1.applyForceVector(b);this.body2.applyForceVector(b.multiply(-1))};NEWTON.Rubberband.prototype.force=function(b){return 2*b};NEWTON.Repellant=function(b){this.type="Repellant";this.body=b;this.exclude=[this.body]};NEWTON.Repellant.prototype={constructor:NEWTON.Rubberband};NEWTON.Repellant.prototype.__applyForce=function(b){for(var c=0;c<b.__bodies.length;c++){var d=b.__bodies[c];0>this.exclude.indexOf(d)&&this.__applyForce_to_bodies(d)}};
NEWTON.Repellant.prototype.__applyForce_to_bodies=function(b){var c=new NEWTON.v3d;c.subtract(b.position,this.body.position);c.multiply(slidervars.physicsRadius*slidervars.physicsRadius*this.body.radius*b.radius*this.force(c.length())/c.length());b.applyForceVector(c);this.body.applyForceVector(c.multiply(-1))};NEWTON.Repellant.prototype.force=function(b){return 1/b/b};NEWTON.Gravity=function(b){this.type="Gravity";this.body=b;this.exclude=[this.body]};NEWTON.Gravity.prototype={constructor:NEWTON.Rubberband};NEWTON.Gravity.prototype.__applyForce=function(b){for(var c=0;c<b.__bodies.length;c++){var d=new NEWTON.v3d;d.copy(this.body.position);d.multiply(this.force(d.lengthsquare())/d.lengthsquare());this.body.applyForceVector(d.multiply(-1))}};NEWTON.Gravity.prototype.force=function(b){return.01};
